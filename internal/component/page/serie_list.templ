package page

import "github.com/solsteace/misite/internal/entity"
import "fmt"

templ SerieList(serieList []entity.SerieList) {
    <div class="explore-layout" >
        <div class="explore-layout__left serie-list__exploration">
            <section> SEARCH FUNCTIONALITY HERE </section>
        </div>
        <div class="explore-layout__right">
            for idx, sl := range serieList {
                <a 
                    class="cmp__list"
                    href={fmt.Sprintf("/serie/%d", sl.Id)}
                    hx-trigger="click"
                    hx-get={fmt.Sprintf("/serie/%d", sl.Id)}
                    hx-target="#page"
                >
                    <div class="lyt__1x2 lyt__1x2--1-3 cmp__textImage serie-list__entries">
                        <div class="cmp__image serie-list__entry-thumbnail">
                            <img src={sl.Thumbnail}>
                        </div>
                        <div class="serie-list__entry-text">
                            <p class="u__h u__h--4"> {sl.Name} </p>
                            <p> 
                                if truncIdx := 256; len(sl.Description) > truncIdx {
                                    {sl.Description[:truncIdx]}...
                                }  else {
                                    {sl.Description}
                                }
                            </p>
                        </div>
                    </div>

                </a>

                if idx < len(serieList) - 1 {
                    <div class="cmp__list-delimiter"> </div>
                }
            }
        </div>
    </div>
}